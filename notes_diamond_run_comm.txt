Prompt:

You are a professional minecraft player, and one of the best in the world at getting diamonds. 
You are tasked with helping this new player improve their abilities at getting diamonds. They are not that good yet,
so you will supervise their work and tell them whether or not to try again.


Env
export VOL=/workspace 
export PATH="$VOL/micromamba:$PATH"
eval "$(micromamba shell hook -s bash)"

micromamba activate /workspace/mamba/envs/dagger

scp -r -P 43479 -i ~/.ssh/id_ed25519 root@216.81.245.71:/workspace/foundation-dagger/foundation-dagger/outputs/diamond9 /Users/willi1/foundation-dagger/diffusion-forcing-transformer/outputs

Decoding
python scripts/decode_diamond_frames.py \
    --data-root data/task_diamond \
    --output-root data/task_diamond_decoded \
    --num-workers 8


Training
python scripts/train_diamond_bc.py \
    --data-root data/task_diamond_decoded \
    --use-decoded \
    --epochs 50 \
    --batch-size 512 \
    --context-frames 1 \
    --train-fraction 1.0 \
    --val-fraction 0.03 \
    --learning-rate 0.0003 \
    --weight-decay 0.0001 \
    --grad-clip-norm 2.0 \
    --label-smoothing 0.05 \
    --n-camera-bins 5 \
    --num-workers 26 \
    --warmup-steps 10000 \
    --backbone resnet18 \
    --button-weight 1.0 \
    --camera-weight 1.0 \
    --categorical-weight 1.5 \
    --class-weight-temperature 1.0 \
    --seed 0 \
    --checkpoint-interval 1 \
    --output checkpoints/bc_diamond_1.ckpt \
    --sampler-chunk-size 512 \
    --prefetch-factor 6


Eval
sudo add-apt-repository ppa:openjdk-r/ppa   
sudo apt-get update
sudo apt-get install openjdk-8-jdk

if ! command -v fluxbox >/dev/null 2>&1; then
  sudo apt-get update && sudo apt-get install -y \
    xvfb x11vnc fluxbox mesa-utils \
    libgl1-mesa-dri libglu1-mesa libgl1 \
    libxi6 libxtst6 libxrandr2 libxrender1 libxinerama1 libxcursor1
fi

pkill -f 'Xvfb :99' || true
Xvfb :99 -screen 0 1920x1080x24 -ac >/tmp/xvfb.log 2>&1 &
export DISPLAY=:99

( fluxbox >/tmp/fluxbox.log 2>&1 & )

pkill -f x11vnc || true
x11vnc -display :99 -rfbport 5900 -listen 0.0.0.0 \
  -nopw -forever -shared -xkb >/tmp/x11vnc.log 2>&1 &

python scripts/minerl_evaluation_diamond.py \
    --checkpoint /workspace/foundation-dagger/foundation-dagger/checkpoints/bc_diamond_1/bc_diamond_1_epoch006.ckpt \
    --env-id MineRLObtainDiamondShovel-v0 \
    --episodes 1 \
    --output-dir /workspace/foundation-dagger/foundation-dagger/outputs/diamond1 \
    --max-steps 1200

pkill -f 'Xvfb :99' || true
rm -f /tmp/.X99-lock